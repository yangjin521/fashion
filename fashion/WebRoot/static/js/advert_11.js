(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(process){module.exports=createBreakpointManager;module.exports.BreakpointManager=BreakpointManager;function createBreakpointManager(){var bm=new BreakpointManager;bm.start();return bm}var Breakpoint=require("./breakpoint"),Emitter=require("events").EventEmitter,inherits=require("inherits"),match=require("./match-media");function BreakpointManager(){Emitter.call(this);this.breakpoints=[]}inherits(BreakpointManager,Emitter);BreakpointManager.prototype.add=function(name,media){if(!match("only all"))return;var breakpoint=new Breakpoint(name,media);this.breakpoints.push(breakpoint);process.nextTick(this.checkSingle.bind(this,breakpoint))};BreakpointManager.prototype.fallback=function(fn){if(match("only all"))return;fn()};BreakpointManager.prototype.start=function(){if(!match("only all"))return;this._boundCheck=this.check.bind(this);window.addEventListener("resize",this._boundCheck);this.check()};BreakpointManager.prototype.stop=function(){if(this._boundCheck)window.removeEventListener("resize",this._boundCheck)};BreakpointManager.prototype.check=function(){this.breakpoints.forEach(this.checkSingle.bind(this))};BreakpointManager.prototype.checkSingle=function(breakpoint){switch(breakpoint.check()){case true:return this.emit("enter:"+breakpoint.name);case false:return this.emit("exit:"+breakpoint.name);case null:return}};BreakpointManager.prototype.on=function(event,fn,isFallback){Emitter.prototype.on.call(this,event,fn);if(isFallback)this.fallback(fn)}}).call(this,require("_process"))},{"./breakpoint":2,"./match-media":4,_process:7,events:6,inherits:5}],2:[function(require,module,exports){module.exports=Breakpoint;var match=require("./match-media");function Breakpoint(name,media){this.name=name;this.media=media;this.matches=null}Breakpoint.prototype.check=function(){if(this.matches===null){this.matches=match(this.media);return this.matches}if(match(this.media)&&!this.matches){this.matches=true;return this.matches}if(!match(this.media)&&this.matches){this.matches=false;return this.matches}return null}},{"./match-media":4}],3:[function(require,module,exports){window.matchMedia||(window.matchMedia=function(){"use strict";var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement("style"),script=document.getElementsByTagName("script")[0],info=null;style.type="text/css";style.id="matchmediajs-test";script.parentNode.insertBefore(style,script);info="getComputedStyle"in window&&window.getComputedStyle(style,null)||style.currentStyle;styleMedia={matchMedium:function(media){var text="@media "+media+"{ #matchmediajs-test { width: 1px; } }";if(style.styleSheet){style.styleSheet.cssText=text}else{style.textContent=text}return info.width==="1px"}}}return function(media){return{matches:styleMedia.matchMedium(media||"all"),media:media||"all"}}}())},{}],4:[function(require,module,exports){module.exports=match;require("./match-media-polyfill");var browserMatchMedia=window.matchMedia||window.msMatchMedia;function match(mq){if(!browserMatchMedia)return false;var result=browserMatchMedia(mq);return!!result&&!!result.matches}},{"./match-media-polyfill":3}],5:[function(require,module,exports){if(typeof Object.create==="function"){module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;ctor.prototype=Object.create(superCtor.prototype,{constructor:{value:ctor,enumerable:false,writable:true,configurable:true}})}}else{module.exports=function inherits(ctor,superCtor){ctor.super_=superCtor;var TempCtor=function(){};TempCtor.prototype=superCtor.prototype;ctor.prototype=new TempCtor;ctor.prototype.constructor=ctor}}},{}],6:[function(require,module,exports){function EventEmitter(){this._events=this._events||{};this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;EventEmitter.defaultMaxListeners=10;EventEmitter.prototype.setMaxListeners=function(n){if(!isNumber(n)||n<0||isNaN(n))throw TypeError("n must be a positive number");this._maxListeners=n;return this};EventEmitter.prototype.emit=function(type){var er,handler,len,args,i,listeners;if(!this._events)this._events={};if(type==="error"){if(!this._events.error||isObject(this._events.error)&&!this._events.error.length){er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Uncaught, unspecified "error" event. ('+er+")");err.context=er;throw err}}}handler=this._events[type];if(isUndefined(handler))return false;if(isFunction(handler)){switch(arguments.length){case 1:handler.call(this);break;case 2:handler.call(this,arguments[1]);break;case 3:handler.call(this,arguments[1],arguments[2]);break;default:args=Array.prototype.slice.call(arguments,1);handler.apply(this,args)}}else if(isObject(handler)){args=Array.prototype.slice.call(arguments,1);listeners=handler.slice();len=listeners.length;for(i=0;i<len;i++)listeners[i].apply(this,args)}return true};EventEmitter.prototype.addListener=function(type,listener){var m;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events)this._events={};if(this._events.newListener)this.emit("newListener",type,isFunction(listener.listener)?listener.listener:listener);if(!this._events[type])this._events[type]=listener;else if(isObject(this._events[type]))this._events[type].push(listener);else this._events[type]=[this._events[type],listener];if(isObject(this._events[type])&&!this._events[type].warned){if(!isUndefined(this._maxListeners)){m=this._maxListeners}else{m=EventEmitter.defaultMaxListeners}if(m&&m>0&&this._events[type].length>m){this._events[type].warned=true;console.error("(node) warning: possible EventEmitter memory "+"leak detected. %d listeners added. "+"Use emitter.setMaxListeners() to increase limit.",this._events[type].length);if(typeof console.trace==="function"){console.trace()}}}return this};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.once=function(type,listener){if(!isFunction(listener))throw TypeError("listener must be a function");var fired=false;function g(){this.removeListener(type,g);if(!fired){fired=true;listener.apply(this,arguments)}}g.listener=listener;this.on(type,g);return this};EventEmitter.prototype.removeListener=function(type,listener){var list,position,length,i;if(!isFunction(listener))throw TypeError("listener must be a function");if(!this._events||!this._events[type])return this;list=this._events[type];length=list.length;position=-1;if(list===listener||isFunction(list.listener)&&list.listener===listener){delete this._events[type];if(this._events.removeListener)this.emit("removeListener",type,listener)}else if(isObject(list)){for(i=length;i-- >0;){if(list[i]===listener||list[i].listener&&list[i].listener===listener){position=i;break}}if(position<0)return this;if(list.length===1){list.length=0;delete this._events[type]}else{list.splice(position,1)}if(this._events.removeListener)this.emit("removeListener",type,listener)}return this};EventEmitter.prototype.removeAllListeners=function(type){var key,listeners;if(!this._events)return this;if(!this._events.removeListener){if(arguments.length===0)this._events={};else if(this._events[type])delete this._events[type];return this}if(arguments.length===0){for(key in this._events){if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events={};return this}listeners=this._events[type];if(isFunction(listeners)){this.removeListener(type,listeners)}else if(listeners){while(listeners.length)this.removeListener(type,listeners[listeners.length-1])}delete this._events[type];return this};EventEmitter.prototype.listeners=function(type){var ret;if(!this._events||!this._events[type])ret=[];else if(isFunction(this._events[type]))ret=[this._events[type]];else ret=this._events[type].slice();return ret};EventEmitter.prototype.listenerCount=function(type){if(this._events){var evlistener=this._events[type];if(isFunction(evlistener))return 1;else if(evlistener)return evlistener.length}return 0};EventEmitter.listenerCount=function(emitter,type){return emitter.listenerCount(type)};function isFunction(arg){return typeof arg==="function"}function isNumber(arg){return typeof arg==="number"}function isObject(arg){return typeof arg==="object"&&arg!==null}function isUndefined(arg){return arg===void 0}},{}],7:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}],8:[function(require,module,exports){var funcTag="[object Function]";var reIsHostCtor=/^\[object .+?Constructor\]$/;function isObjectLike(value){return!!value&&typeof value=="object"}var objectProto=Object.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var objToString=objectProto.toString;var reIsNative=RegExp("^"+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}function isNative(value){if(value==null){return false}if(isFunction(value)){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}module.exports=getNative},{}],9:[function(require,module,exports){var getNative=require("lodash._getnative");var FUNC_ERROR_TEXT="Expected a function";var nativeMax=Math.max,nativeNow=getNative(Date,"now");var now=nativeNow||function(){return(new Date).getTime()};function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=!!options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?!!options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined}function complete(isCalled,id){if(id){clearTimeout(id)}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId)}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){complete(trailing,timeoutId)}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined}return result}debounced.cancel=cancel;return debounced}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=debounce},{"lodash._getnative":8}],10:[function(require,module,exports){var debounce=require("lodash.debounce");var FUNC_ERROR_TEXT="Expected a function";function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}return debounce(func,wait,{leading:leading,maxWait:+wait,trailing:trailing})}function isObject(value){var type=typeof value;return!!value&&(type=="object"||type=="function")}module.exports=throttle},{"lodash.debounce":9}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=init;function init(options){var $window=$(window),dfp=window.dfp;$window.on("sl:competition:show",function(){dfp.zone=options.zone;dfp.cycle()})}},{}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=init;var throttle=require("lodash.throttle");function init(options){var $window=$(window),dfp=window.dfp,galleryViewCount=0,galleryAdvertRefresh=2,refreshAdvert=throttle(function(){options.log("Refreshing gallery adverts",galleryViewCount,galleryAdvertRefresh);dfp.refresh("advert-gallery-top");dfp.refresh("advert-gallery-right")},7e3);$window.on("sl:gallery:open",function(){dfp.zone=options.zone;dfp.cycle()});$window.on("sl:gallery:change",function(){galleryViewCount+=1;dfp.zone=options.zone;if(galleryViewCount%galleryAdvertRefresh===0){refreshAdvert()}})}},{"lodash.throttle":10}],13:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=init;function init(_ref){var homeZone=_ref.homeZone;$(window).on("sl:homepageWidget:in",function(){window.dfp.zone=homeZone;window.dfp.cycle()})}},{}],14:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _competition=require("./competition");var _competition2=_interopRequireDefault(_competition);var _gallery=require("./gallery");var _gallery2=_interopRequireDefault(_gallery);var _homepage=require("./homepage");var _homepage2=_interopRequireDefault(_homepage);var _stickyAdvert=require("./sticky-advert");var _stickyAdvert2=_interopRequireDefault(_stickyAdvert);var _midArticle=require("./mid-article");var _midArticle2=_interopRequireDefault(_midArticle);var _lazyLoad=require("./lazy-load");var _lazyLoad2=_interopRequireDefault(_lazyLoad);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default=[_competition2.default,_gallery2.default,_homepage2.default,_stickyAdvert2.default,_midArticle2.default,_lazyLoad2.default]},{"./competition":11,"./gallery":12,"./homepage":13,"./lazy-load":15,"./mid-article":16,"./sticky-advert":17}],15:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=init;var _unveil=require("../lib/unveil");var _unveil2=_interopRequireDefault(_unveil);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function init(_ref){var log=_ref.log;var ready=false;log("LazyLoad loaded");(0,_unveil2.default)($(".js-lazy-load"),200,function($el){log("Unveiling ",$el);$el.find("[rel=advert]").show();refreshDfp()});$(window.dfp).on("complete",function(){ready=true});function refreshDfp(){log("Refreshing DFP");if(ready){window.dfp.cycle()}else{$(window.dfp).one("ready",function(){window.dfp.cycle()})}}}},{"../lib/unveil":22}],16:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=init;function init(_ref){var log=_ref.log;var slotsRendered=0;function renderAdSlot(afterEl){slotsRendered++;var order=slotsRendered<=2?slotsRendered:"infinite";$adSlot=$('<div class="content-advert__advert" rel="advert"/>').data({sizes:"300x250",targeting:"pos=midarticle|order="+order});$adSlotWrapper=$('<div class="content-advert"/>').append($adSlot);$(afterEl).after($adSlotWrapper)}log("Rendering auto embedded adslots");var afterWords=400;var totalWordCount=0,$adSlot=void 0,$adSlotWrapper=void 0,ready=false,shouldInsert=false;$(".article__content .widget--html > p").each(function(i,p){var wordCount=p.innerHTML.match(/\S+/g).length;totalWordCount+=wordCount;if(totalWordCount>=afterWords&&wordCount>=10){ready=true}if(ready){shouldInsert=$(p).next().is("p")}if(shouldInsert){renderAdSlot(p);totalWordCount=0;ready=false;shouldInsert=false}})}},{}],17:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=initStickyAdverts;var _inViewport=require("../lib/in-viewport");var _inViewport2=_interopRequireDefault(_inViewport);var _throttle=require("../lib/throttle");var _throttle2=_interopRequireDefault(_throttle);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var $window=$(window),navigationHeight=60,navigationSpacing=20;function initStickyAdverts(_ref){var log=_ref.log;if($window.width()<1024)return;function setupStickyAdverts($adverts){$adverts.each(function(index,el){var $container=$(el),$target=$container.find(".js-sticky-advert-target"),$parentRow=$container.closest(".js-sticky-advert-row");var currentState="",previousState="",viewablityDuration=$container.data("duration")||7e3;function moveAdvertBack(){log("Clear Sticky",$target);var yOffset=0;if($target.hasClass("is-pushing-up")){yOffset=$container.offset().top}else{yOffset=-$window.scrollTop()+$container.offset().top}$target.addClass("is-resetting");log("Moving to",yOffset);$target.css({top:yOffset+"px"});$target.on("transitionend webkitTransitionEnd",function(){log("Transitionend",$target);$target.removeClass("is-fixed is-pushing-up is-resetting")})}function clearSticky(){log("Clear on next scroll event",$target.offset().top);if($window.scrollTop()===0){moveAdvertBack()}else{$window.one("scroll",moveAdvertBack)}$window.off("scroll.advert-"+index)}$target.on("rendered",function(){if(!$target.is(":visible"))return;var viewStart=0,viewportTimeout=void 0;function ensureNoOverView(){if(!viewportTimeout&&(0,_inViewport2.default)($container)){log("In viewport");viewStart=Date.now();viewportTimeout=setTimeout(function(){log("Clearing sticky watcher");$window.off("scroll.advert-"+index)},Math.floor(Math.random()*1e3)+viewablityDuration)}}$window.on("scroll.advert-"+index,(0,_throttle2.default)(function(){ensureNoOverView();var advertTopOffset=$container.hasClass("sticky-advert--billboard")?0:navigationSpacing;var advertTopPosition=$container.offset().top-(navigationHeight+advertTopOffset);var clearStickyTimeout=void 0;if(!$target.hasClass("is-fixed")&&advertTopPosition<=$window.scrollTop()&&(0,_inViewport2.default)($container)){log("Make Sticky",$target);$container.height($target.outerHeight(true));$target.addClass("is-fixed");log("Show for ",viewablityDuration-(Date.now()-viewStart));clearTimeout(viewportTimeout);if(!clearStickyTimeout){clearStickyTimeout=setTimeout(clearSticky,viewablityDuration-(Date.now()-viewStart))}}else if($target.hasClass("is-fixed")&&advertTopPosition>$window.scrollTop()){$target.removeClass("is-fixed is-pushing-up");log("Forced reset due to navigation limitation");clearTimeout(clearStickyTimeout)}else if($target.hasClass("is-fixed")&&$parentRow.length){var windowOffset=$window.scrollTop(),advertHeight=$container.outerHeight(),parentRowHeight=$parentRow.outerHeight(),parentRowBottom=$parentRow.offset().top+parentRowHeight;if(windowOffset+advertHeight+navigationHeight+advertTopOffset>=parentRowBottom){currentState="isPushingUp"}else{currentState="isFixed"}if(currentState!==previousState){switch(currentState){case"isPushingUp":$target.addClass("is-pushing-up").css({top:parentRowBottom-advertHeight});break;case"isFixed":$target.removeClass("is-pushing-up").css({top:""});break}}previousState=currentState}},50));ensureNoOverView()})})}setupStickyAdverts($(".js-sticky-advert-container"));$window.one("sl:homepageWidget:in",function(){setupStickyAdverts($(".js-homepage-widget .js-sticky-advert-container"))})}},{"../lib/in-viewport":19,"../lib/throttle":21}],18:[function(require,module,exports){"use strict";var _queryStringExtractor=require("./lib/query-string-extractor");var _queryStringExtractor2=_interopRequireDefault(_queryStringExtractor);var _break=require("break");var _break2=_interopRequireDefault(_break);var _breakpoints=require("../app/breakpoints");var _breakpoints2=_interopRequireDefault(_breakpoints);var _components=require("./components");var _components2=_interopRequireDefault(_components);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var breakpointManager=(0,_break2.default)();function log(){var _console;if(console)(_console=console).log.apply(_console,arguments)}setTimeout(function(){breakpointManager.add("desktop",_breakpoints2.default.desktopMq);breakpointManager.add("mobiletablet",_breakpoints2.default.mobileTabletMq)},0);var getDevice=function getDevice(){var width=$(document).width();if(width<_breakpoints2.default.mobile.finish)return"smartphone";if(width<_breakpoints2.default.tablet.finish)return"tablet";return"desktop"};$(function(){var dfp=window.dfp,campaign=(0,_queryStringExtractor2.default)("campaign");var type="section",path="home",zone=void 0,homeZone=void 0,id="",slug="";if(window.__entity){type=window.__entity.articleType||"section";id=window.__entity.id||"";slug=document.location.pathname.split("/").slice(-1).join("/");path=window.__entity.path||document.location.pathname.split("/").slice(0,-1).join("/");if(path==="/")path="/home"}dfp.collapsable=true;if((0,_queryStringExtractor2.default)("network")==="clock"){dfp.network="/65519446";dfp.zone=path;homeZone="/home"}else{var prefix=document.location.host.indexOf("shortlist")!==-1?"shortlist":"stylist";dfp.network="/4987";dfp.zone="/"+prefix+path;homeZone="/"+prefix+"/home"}zone=dfp.zone;dfp["targeting_all"]=[{key:"type",value:type},{key:"is_article",value:type!=="section"?"yes":"no"},{key:"path",value:path},{key:"post_id",value:id},{key:"post_slug",value:slug},{key:"device",value:getDevice()}];if(campaign)dfp.targeting_all.push({key:"campaign",value:campaign});$(window.dfp).on("slot_rendered",function(e,data){log("Adslot rendered",data.el.attr("id"),data.is_empty?"Empty":"Filled",data.el.data("targeting"),data.el.data("sizes"),data)});_components2.default.forEach(function(init){init({zone:zone,homeZone:homeZone,log:log,breakpointManager:breakpointManager})});dfp.enable()})},{"../app/breakpoints":23,"./components":14,"./lib/query-string-extractor":20,break:1}],19:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=inViewport;function inViewport($el){var threshold=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var el={top:$el.offset().top,bottom:$el.offset().top+$el.outerHeight(true)},win={top:$(window).scrollTop()-threshold,bottom:$(window).scrollTop()+$(window).height()+threshold},topView=el.top<=win.top&&el.bottom<=win.top&&win.top<=el.bottom,bottomView=win.top<=el.top&&win.bottom<=el.bottom&&el.top<=win.bottom,entireView=el.top<=win.top&&win.bottom<=el.bottom,inView=win.top<=el.top&&el.bottom<=win.bottom;return topView||bottomView||entireView||inView}},{}],20:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=getQueryStringParameter;function getQueryStringParameter(name,url){var regex=void 0,results=void 0;if(!url)url=window.location.href;name=name.replace(/[\[\]]/g,"\\$&");regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)");results=regex.exec(url);if(!results)return null;if(!results[2])return"";return decodeURIComponent(results[2].replace(/\+/g," "))}},{}],21:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=throttle;function throttle(fn,threshhold){var last=void 0,deferTimer=void 0;return function(){var context=this;var now=Date.now(),args=arguments;if(last&&now<last+threshhold){clearTimeout(deferTimer);deferTimer=setTimeout(function(){last=now;fn.apply(context,args)},threshhold)}else{last=now;fn.apply(context,args)}}}},{}],22:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=unveil;var _inViewport=require("../lib/in-viewport");var _inViewport2=_interopRequireDefault(_inViewport);var _throttle=require("../lib/throttle");var _throttle2=_interopRequireDefault(_throttle);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function unveil($elements){var threshold=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var callback=arguments[2];var $w=$(window);var loaded=void 0;$elements.one("unveil",function(event){if(typeof callback==="function"){callback($(event.currentTarget))}});function unveil(){var inview=$elements.filter(function(index,el){var $el=$(el);if($el.is(":hidden")){return}return(0,_inViewport2.default)($el,threshold)});loaded=inview.trigger("unveil");$elements=$elements.not(loaded)}$w.on("scroll.unveil resize.unveil lookup.unveil",(0,_throttle2.default)(unveil,50));unveil();return $elements}},{"../lib/in-viewport":19,"../lib/throttle":21}],23:[function(require,module,exports){"use strict";module.exports.desktopWithSkins={start:1230};module.exports.desktopWide={start:1180};module.exports.desktop={start:1024};module.exports.tablet={start:768,finish:1023};module.exports.mobileLandscapeUp={start:450};module.exports.mobile={start:0,finish:767};module.exports.mobilePortrait={finish:449};module.exports.desktopWithSkinsMq="(min-width:"+module.exports.desktopWithSkins.start+"px)";module.exports.desktopWideMq="(min-width:"+module.exports.desktopWide.start+"px)";module.exports.desktopMq="(min-width:"+module.exports.desktop.start+"px)";module.exports.tabletDesktopMq="(min-width: "+module.exports.tablet.start+"px)";module.exports.mobileTabletMq="(max-width: "+module.exports.tablet.finish+"px)";module.exports.tabletMq="(min-width: "+module.exports.tablet.start+"px) and (max-width: "+module.exports.tablet.finish+"px)";module.exports.mobileLandscapeUpMq="(min-width: "+module.exports.mobileLandscapeUp.start+"px)";module.exports.mobileMq="(min-width: "+module.exports.mobile.start+"px) and (max-width: "+module.exports.mobile.finish+"px)";module.exports.mobilePortraitMq="(max-width: "+module.exports.mobilePortrait.finish+"px)"},{}]},{},[18]);
